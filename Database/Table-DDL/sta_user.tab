create table sta_user
(
    id              number generated by default on null as identity,
    first_name      varchar2(80) not null,
    last_name       varchar2(80) not null,
    date_of_birth   date,
    address1        varchar2(100) not null,
    address2        varchar2(100),
    phone_number1   varchar2(20),
    phone_number2   varchar2(20),
    clss_id         number,
    ctkr_id         number,
    remarks         varchar2(4000),
    email           varchar2(320),
    password        varchar2(40),
    deleted_flg     boolean default false not null,
    constraint sta_usr_pk primary key(id),
    constraint sta_usr_usr_fk foreign key (usr_id) references sta_user
)
;


alter table sta_user add constraint sta_usr_clss_fk foreign key(clss_id)references sta_class;

alter table sta_user add clss_id number;
alter table sta_user add constraint sta_usr_clss_fk foreign key(clss_id)references sta_class;

alter table sta_user drop column usr_id;


alter table sta_user add ctkr_id number;
alter table sta_user add constraint sta_usr_usr_fk foreign key(ctkr_id)references sta_user;




create unique index sta_usr_ix1 on sta_user (lower("FIRST_NAME"), lower("LAST_NAME"), lower("ADDRESS1"));
create unique index sta_usr_ix2 on sta_user (lower("EMAIL"));
alter table sta_user modify phone_number1 varchar2(20) null;